{"version":3,"file":"commonHelpers.js","sources":["../src/cat_api.js","../src/index.js"],"sourcesContent":["// cat_api.js\n\nimport axios from 'axios';\n\nconst apiKey =\n  'live_7zO2UtHss6WanH1oLQ1vnbzQS31rHHFk6zvi69lyordiqDagXpIxykJooBldDqh8';\n\naxios.defaults.headers.common['x-api-key'] = apiKey;\n\nexport function fetchBreeds() {\n  return new Promise((resolve, reject) => {\n    axios\n      .get('https://api.thecatapi.com/v1/breeds')\n      .then(response => resolve(response.data))\n      .catch(error => reject(error));\n  });\n}\n\nexport function fetchCatByBreed(breedId) {\n  return new Promise((resolve, reject) => {\n    const url = `https://api.thecatapi.com/v1/images/search?breed_ids=${breedId}`;\n    axios\n      .get(url)\n      .then(response => resolve(response.data))\n      .catch(error => reject(error));\n  });\n}\n","import SlimSelect from 'slim-select';\nimport { fetchBreeds, fetchCatByBreed } from './cat_api';\nconst breedSelect = document.querySelector('.breed-select');\nconst catInfoDiv = document.querySelector('.cat-info');\nconst loader = document.querySelector('.loader');\nlet selectedBreedId;\n\nconst slim = new SlimSelect({\n  select: breedSelect,\n});\n\nslim.setData([]);\n\nbreedSelect.addEventListener('change', function () {\n  selectedBreedId = breedSelect.value; // Змінена змінна, щоб зберегти значення\n\n  // Show loader while fetching cat information\n  showLoader();\n\n  const fetchPromise = selectedBreedId\n    ? fetchCatByBreed(selectedBreedId)\n    : Promise.resolve();\n\n  fetchPromise\n    .then(catData => {\n      // Check if catData is defined and has the expected structure\n      if (\n        catData &&\n        Array.isArray(catData) &&\n        catData.length > 0 &&\n        catData[0].breeds &&\n        catData[0].breeds.length > 0\n      ) {\n        const catBreed = catData[0].breeds[0];\n\n        // Display cat information\n        catInfoDiv.innerHTML = `\n          <div class=\"cat-info-inner\">\n            <img src=\"${catData[0].url}\" alt=\"Cat Image\" class=\"cat-image\">\n            <div class=\"cat-details\">\n              <h2>${catBreed.name}</h2>\n              <p class=\"description\">${catBreed.description}</p>\n              <p><strong>Temperament:</strong> ${catBreed.temperament}</p>\n            </div>\n          </div>\n        `;\n      } else {\n        // Handle the case when catData is not as expected\n        showErrorToast(\n          'Oops! Unable to retrieve cat information. Please try again.'\n        );\n      }\n    })\n    .catch(error => {\n      console.error('Error:', error);\n      showErrorToast('Oops! Something went wrong! Try reloading the page!');\n    })\n    .finally(() => {\n      // Hide loader after fetching cat information\n      hideLoader();\n    });\n});\n\nfunction showLoader() {\n  loader.style.display = 'inline-block';\n  catInfoDiv.style.display = 'none';\n}\n\nfunction hideLoader() {\n  loader.style.display = 'none';\n  catInfoDiv.style.display = 'flex';\n}\n\nfunction showErrorToast(message) {\n  iziToast.error({\n    title: 'Error',\n    message: message,\n    position: 'topRight',\n    timeout: 5000,\n  });\n}\n\n// Fetch breeds and update SlimSelect outside of the event listener\nfetchBreeds()\n  .then(breeds => {\n    // Update SlimSelect with breed data\n    slim.setData(breeds.map(breed => ({ text: breed.name, value: breed.id })));\n    // Hide loader after fetching breed information\n    hideLoader();\n  })\n  .catch(error => {\n    console.error('Error:', error);\n    showErrorToast('Oops! Something went wrong! Try reloading the page!');\n  });\n"],"names":["apiKey","axios","fetchBreeds","resolve","reject","response","error","fetchCatByBreed","breedId","url","breedSelect","catInfoDiv","loader","selectedBreedId","slim","SlimSelect","showLoader","catData","catBreed","showErrorToast","hideLoader","message","breeds","breed"],"mappings":"6vBAIA,MAAMA,EACJ,wEAEFC,EAAM,SAAS,QAAQ,OAAO,aAAeD,EAEtC,SAASE,GAAc,CAC5B,OAAO,IAAI,QAAQ,CAACC,EAASC,IAAW,CACtCH,EACG,IAAI,qCAAqC,EACzC,KAAKI,GAAYF,EAAQE,EAAS,IAAI,CAAC,EACvC,MAAMC,GAASF,EAAOE,CAAK,CAAC,CACnC,CAAG,CACH,CAEO,SAASC,EAAgBC,EAAS,CACvC,OAAO,IAAI,QAAQ,CAACL,EAASC,IAAW,CACtC,MAAMK,EAAM,wDAAwDD,IACpEP,EACG,IAAIQ,CAAG,EACP,KAAKJ,GAAYF,EAAQE,EAAS,IAAI,CAAC,EACvC,MAAMC,GAASF,EAAOE,CAAK,CAAC,CACnC,CAAG,CACH,CCxBA,MAAMI,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAa,SAAS,cAAc,WAAW,EAC/CC,EAAS,SAAS,cAAc,SAAS,EAC/C,IAAIC,EAEJ,MAAMC,EAAO,IAAIC,EAAW,CAC1B,OAAQL,CACV,CAAC,EAEDI,EAAK,QAAQ,CAAA,CAAE,EAEfJ,EAAY,iBAAiB,SAAU,UAAY,CACjDG,EAAkBH,EAAY,MAG9BM,KAEqBH,EACjBN,EAAgBM,CAAe,EAC/B,QAAQ,QAAO,GAGhB,KAAKI,GAAW,CAEf,GACEA,GACA,MAAM,QAAQA,CAAO,GACrBA,EAAQ,OAAS,GACjBA,EAAQ,GAAG,QACXA,EAAQ,GAAG,OAAO,OAAS,EAC3B,CACA,MAAMC,EAAWD,EAAQ,GAAG,OAAO,GAGnCN,EAAW,UAAY;AAAA;AAAA,wBAEPM,EAAQ,GAAG;AAAA;AAAA,oBAEfC,EAAS;AAAA,uCACUA,EAAS;AAAA,iDACCA,EAAS;AAAA;AAAA;AAAA,SAI1D,MAEQC,EACE,6DACV,CAEA,CAAK,EACA,MAAMb,GAAS,CACd,QAAQ,MAAM,SAAUA,CAAK,EAC7Ba,EAAe,qDAAqD,CAC1E,CAAK,EACA,QAAQ,IAAM,CAEbC,GACN,CAAK,CACL,CAAC,EAED,SAASJ,GAAa,CACpBJ,EAAO,MAAM,QAAU,eACvBD,EAAW,MAAM,QAAU,MAC7B,CAEA,SAASS,GAAa,CACpBR,EAAO,MAAM,QAAU,OACvBD,EAAW,MAAM,QAAU,MAC7B,CAEA,SAASQ,EAAeE,EAAS,CAC/B,SAAS,MAAM,CACb,MAAO,QACP,QAASA,EACT,SAAU,WACV,QAAS,GACb,CAAG,CACH,CAGAnB,EAAa,EACV,KAAKoB,GAAU,CAEdR,EAAK,QAAQQ,EAAO,IAAIC,IAAU,CAAE,KAAMA,EAAM,KAAM,MAAOA,EAAM,EAAI,EAAC,CAAC,EAEzEH,GACJ,CAAG,EACA,MAAMd,GAAS,CACd,QAAQ,MAAM,SAAUA,CAAK,EAC7Ba,EAAe,qDAAqD,CACxE,CAAG"}